<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>stock_data.db å¥åº·æ£€æŸ¥æŠ¥å‘Š</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        body { font-family: "Segoe UI", system-ui, sans-serif; margin: 24px; background: #1a1a2e; color: #eee; }
        h1 { color: #e94560; }
        .summary { display: flex; gap: 24px; flex-wrap: wrap; margin: 20px 0; }
        .card { background: #16213e; padding: 16px 24px; border-radius: 8px; min-width: 160px; }
        .card .value { font-size: 1.5rem; color: #0f3460; font-weight: bold; }
        .card.warn .value { color: #e94560; }
        table { border-collapse: collapse; width: 100%; max-width: 720px; margin: 16px 0; background: #16213e; border-radius: 8px; overflow: hidden; }
        th, td { padding: 10px 14px; text-align: left; border-bottom: 1px solid #0f3460; }
        th { background: #0f3460; color: #e94560; }
        .charts { display: flex; flex-wrap: wrap; gap: 24px; margin: 24px 0; }
        .chart-wrap { width: 400px; height: 280px; }
        footer { margin-top: 32px; color: #666; font-size: 0.9rem; }
    </style>
</head>
<body>
    <h1>ğŸ“Š stock_data.db å¥åº·æ£€æŸ¥æŠ¥å‘Š</h1>
    <p><strong>æ•°æ®åº“è·¯å¾„ï¼š</strong> <code>C:\zhouhe\project\Fan_stock_ai\db\stock_data.db</code></p>
    <div class="summary">
        <div class="card">
            <div class="label">æ•°æ®åº“å¤§å°</div>
            <div class="value">995.97 MB</div>
        </div>
        <div class="card">
            <div class="label">æ€»è¡Œæ•°</div>
            <div class="value">7,107,525</div>
        </div>
        <div class="card ">
            <div class="label">é‡å¤è¡Œæ•°</div>
            <div class="value">0</div>
        </div>
        <div class="card">
            <div class="label">æ•°æ®è¡¨æ•°é‡</div>
            <div class="value">6</div>
        </div>
    </div>
    <p><strong>é‡å¤æ£€æŸ¥ç»“è®ºï¼š</strong> æœªå‘ç°é‡å¤è¡Œï¼Œä½“ç§¯ä¸»è¦æ¥è‡ªæ•°æ®é‡ï¼ˆå¦‚ factor_values è¡¨ï¼‰ã€‚</p>

    <h2>å„è¡¨ç»Ÿè®¡</h2>
    <table>
        <thead>
            <tr>
                <th>è¡¨å</th>
                <th>æ€»è¡Œæ•°</th>
                <th>å»é‡è¡Œæ•°</th>
                <th>é‡å¤è¡Œæ•°</th>
                <th>é‡å¤å æ¯”</th>
                <th>ä¼°ç®—å¤§å°</th>
            </tr>
        </thead>
        <tbody>
            
        <tr>
            <td>factor_values</td>
            <td>6,401,976</td>
            <td>6,401,976</td>
            <td>0</td>
            <td>0.0%</td>
            <td>500154.4 KB</td>
        </tr>
        <tr>
            <td>forward_returns</td>
            <td>229,565</td>
            <td>229,565</td>
            <td>0</td>
            <td>0.0%</td>
            <td>17934.8 KB</td>
        </tr>
        <tr>
            <td>kline_sync_state</td>
            <td>552</td>
            <td>552</td>
            <td>0</td>
            <td>0.0%</td>
            <td>43.1 KB</td>
        </tr>
        <tr>
            <td>stock_daily</td>
            <td>426,953</td>
            <td>426,953</td>
            <td>0</td>
            <td>0.0%</td>
            <td>33355.7 KB</td>
        </tr>
        <tr>
            <td>stock_monthly</td>
            <td>9,489</td>
            <td>9,489</td>
            <td>0</td>
            <td>0.0%</td>
            <td>741.3 KB</td>
        </tr>
        <tr>
            <td>stock_weekly</td>
            <td>38,990</td>
            <td>38,990</td>
            <td>0</td>
            <td>0.0%</td>
            <td>3046.1 KB</td>
        </tr>
        </tbody>
    </table>

    <h2>å¯è§†åŒ–</h2>
    <div class="charts">
        <div class="chart-wrap">
            <canvas id="chartRows"></canvas>
        </div>
        <div class="chart-wrap">
            <canvas id="chartDups"></canvas>
        </div>
        <div class="chart-wrap">
            <canvas id="chartPie"></canvas>
        </div>
    </div>

    <footer>æŠ¥å‘Šç”± tools/db_health_check.py ç”Ÿæˆã€‚è‹¥å­˜åœ¨é‡å¤ï¼Œå¯è¿è¡Œ <code>python -m tools.db_health_check --fix</code> å»é‡åä½¿ç”¨ VACUUM æ”¶ç¼©æ–‡ä»¶ã€‚</footer>

    <script>
        const labels = ['factor_values', 'forward_returns', 'kline_sync_state', 'stock_daily', 'stock_monthly', 'stock_weekly'];
        new Chart(document.getElementById("chartRows"), {
            type: "bar",
            data: {
                labels,
                datasets: [{ label: "æ€»è¡Œæ•°", data: [6401976, 229565, 552, 426953, 9489, 38990], backgroundColor: "#0f3460" }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { title: { display: true, text: "å„è¡¨è¡Œæ•°" } },
                scales: { y: { beginAtZero: true } }
            }
        });
        new Chart(document.getElementById("chartDups"), {
            type: "bar",
            data: {
                labels,
                datasets: [{ label: "é‡å¤è¡Œæ•°", data: [0, 0, 0, 0, 0, 0], backgroundColor: "#e94560" }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { title: { display: true, text: "å„è¡¨é‡å¤è¡Œæ•°" } },
                scales: { y: { beginAtZero: true } }
            }
        });
        const pieColors = ["#e94560", "#0f3460", "#533483", "#16c79a", "#f4a261", "#2a9d8f"];
        new Chart(document.getElementById("chartPie"), {
            type: "doughnut",
            data: {
                labels,
                datasets: [{ data: [6401976, 229565, 552, 426953, 9489, 38990], backgroundColor: pieColors.slice(0, labels.length) }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { title: { display: true, text: "å„è¡¨è¡Œæ•°å æ¯”" } }
            }
        });
    </script>
</body>
</html>